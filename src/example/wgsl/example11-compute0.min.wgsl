@compute @workgroup_size(16,16,1) fn main(@builtin(global_invocation_id) d:vec3u){const c:i32=3;const v:f32=0.70710678118;let e=u.resolution;if (f32(d.x)>=e.x||f32(d.y)>=e.y){return;}let r=vec2f(f32(d.x),f32(d.y));var h=vec3f(0.0);let p=1.0/(350.0-250.0*sin(fma(0.25,u.time,-0.3)));let m=vec2f(-0.5,2.0)+0.5*vec2f(cos(fma(0.13,u.time,-1.3)),sin(fma(0.13,u.time,-1.3)));for(var j:i32=0;j<c;j++){for(var k:i32=0;k<c;k++){let w=(2.0*(r+vec2f(f32(j),f32(k))/f32(c))-e.xy)/e.y;let t=vec2f(-0.533516,0.526141)+w*p;var a=vec2f(0.0);var b=vec2f(0.0);var l:f32=0.0;var i:f32=1e20;var g:f32=0.0;for(var n:i32=0;n<150;n++){b=vec2f(fma(2.0*a.x,b.x,-2.0*a.y*b.y),fma(2.0*a.x,b.y,2.0*a.y*b.x))+vec2f(1.0,0.0);a=t+vec2f(a.x*a.x-a.y*a.y,2.0*a.x*a.y);let s=dot(a,a)>1024.0;if (s){break;}let q=a-vec2f(0.0,1.0);let f=abs(dot(q,vec2f(v)));let o=1.0-smoothstep(0.6,1.4,f);g=fma(o,f,g);l=fma(o,f,l);i=min(i,dot(a-m,a-m));}let x=sqrt(dot(a,a)/dot(b,b))*log(dot(a,a));let y=pow(clamp(2.0*x/p,0.0,1.0),0.5);let z=pow(clamp(1.5*l/g,0.0,1.0),2.0);let A=pow(clamp(0.4*i,0.0,1.0),0.25);let B=3.0+4.0*z;let C=4.1+2.0*A;h+=2.0*sqrt(y*(0.5+0.5*sin(B+vec3f(0.0,0.5,1.0)))*(0.5+0.5*sin(C+vec3f(1.0,0.5,0.0))));}}h/=f32(c*c);textureStore(outTex,d.xy,vec4f(h,1.0));}